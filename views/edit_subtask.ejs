<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        if (window.innerWidth <= 768) {
            document.write('<link rel="stylesheet" href="/stylesheets/mobile.css">');
        } else {
            document.write('<link rel="stylesheet" href="/stylesheets/desktop.css">');
        }
    </script>
    <title>Document</title>
</head>
<body>
<div class="container">
    <div class="sidebar">
        <img src="/images/hayabusa2.png" alt="icon">
        <% if(userID) { %>
            <ul>
                <a href="/"><li>ホーム</li></a>
                <a href="/dashboard"><li>ダッシュボード</li></a>
                <a href="/project/projects"><li>プロジェクト一覧</li></a>
                <a href="/task/tasks"><li>タスク一覧</li></a>
                <a href="/profile?uid=<%= userID %>"><li>マイページ</li></a>
                <a href="/login/logout"><li>ログアウト</li></a>
            </ul>
        <% }else { %>
            <ul>
                <a href="/"><li>ホーム</li></a>
                <a href="/login"><li>ログイン</li></a>
                <a href="/login/create"><li>アカウント作成</li></a>
            </ul>
        <% } %>
    </div>
    <div class="content">
        <div class="section">
            <h2 class="subtask-heading">サブタスク編集</h2>
            <form method="post" action="/subtask/edit-subtask">
                <label for="subtask_name"><b>Task Name</b></label>
                <input type="text" value="<%= subtaskData[0].name %>" name="subtask_name" required>
                <br>

                <label for="task_description"><b>Task Description</b></label>
                <input type="text" value="<%= subtaskData[0].description %>" name="subtask_description" required>
                <br>

                <label for="start_date"><b>Start Date</b></label>
                <input type="date" value="<%= subtaskData[0].start %>" name="start_date" required>
                <br>

                <label for="due_date"><b>Due Date</b></label>
                <input type="date" value="<%= subtaskData[0].due %>" name="due_date" required>
                <br>

                <label for="priority"><b>Priority</b></label>
                <input type="text" value="<%= subtaskData[0].priority %>" name="priority" required>
                <br>

                <div class="selector">
                    <label for="responsible"><b>Responsible</b></label>
                    <% if(users) { %>
                        <select name="responsible">
                            <% users.forEach( row => { %>
                                <option value="<%= row.userID%>" <%= row.userID === subtaskData[0].responsible ? 'selected' : '' %>><%= row.name %></option>
                            <% }) %>
                        </select>
                    <% } else { %>
                        <input type="text" placeholder="Enter Responsible" name="responsible" required>
                    <% } %>
                </div>

                <div class="selector">
                    <label for="progress"><b>Progress</b></label>
                    <select name="progress">
                        <option value="-1" <%= subtaskData[0].completion === -1 ? 'selected' : ''%>>開始前</option>
                        <option value="0" <%= subtaskData[0].completion === 0 ? 'selected' : ''%>>進行中</option>
                        <option value="1" <%= subtaskData[0].completion === 1 ? 'selected' : ''%>>完了</option>
                    </select>
                </div>

                <button type="submit">変更を保存</button>
            </form>
        </div>
    </div>
</div>
</body>
</html>